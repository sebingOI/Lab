# ì ‘ì† !

ìƒíƒœ: ì™„ë£Œ ğŸ™Œ
ì†Œìš”ì‹œê°„: 2
ìš°ì„ ìˆœìœ„: ìš°ì„ ìˆœìœ„1
ì‘ì„±ì¼ì‹œ: 2022ë…„ 1ì›” 16ì¼ ì˜¤í›„ 9:37
ì œí’ˆ ê´€ë¦¬ì: ìµëª…

# ìœ ì €DB

```jsx
UDP ì„œë²„

í”„ë¡œí† ì½œ: CS (ì ‘ì†ì„ ì‹œì‘í•  ë•Œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ë³´ë‚´ì£¼ëŠ” í”„ë¡œí† ì½œ)
					CC (ìºë¦­í„° ìƒì„± í”„ë¡œí† ì½œ)
				  uDB(ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚´ëŠ” ìœ ì €DB ì „ì†¡ í”„ë¡œí† ì½œ)
					DBs(í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ìœ ì €DB íšŒì‹  ì™„ë£Œ í”„ë¡œí† ì½œ)

DBs message: nick(string)
CS message: id(string)
CC message: cla(int), id(string)
uDB message: nick(string), Lx(float), Ly(float), Lz(float), Rz(float), 
                          cla(int), lv(int), pExp(int), uDB(int), act(int)

ì²˜ë¦¬ ë‚´ìš©: <ìœ ì €DB>
					1. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° CS í”„ë¡œí† ì½œê³¼ íŒ¨í‚·ì„ ë°›ëŠ”ë‹¤. 
					2. DBì—ì„œ idì— ë§ëŠ” ì •ë³´ ì¡°íšŒ
					3. cla ì¡°íšŒ
						3-1. claê°€ 0ì¼ ê²½ìš°
							3-1-1. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ cla, cc ì „ì†¡ //ìºë¦­í„° ì—†ë‹¤ëŠ”ê±¸ ë‚˜íƒ€ë‚´ëŠ” íŒ¨í‚·
							3-1-2. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ id, cla, cc ë°›ìŒ //ìºë¦­í„° ìƒì„± íŒ¨í‚·ì„ ë°›ìŒ
							3-1-3. [ìºë¦­í„° ìƒì„±](https://www.notion.so/ddb53d67a0d54dc6a013ca3cc91d361c) [(ìƒì„± ë§í¬)](https://www.notion.so/ddb53d67a0d54dc6a013ca3cc91d361c)//ì‹¤ì œ ìˆ˜í–‰
							3-1-4. ìœ ì €DBì— claê°’ ì—…ë°ì´íŠ¸
							3-1-5. 4ë²ˆìœ¼ë¡œ ì´ë™
						3-2. claê°€ 0ì´ ì•„ë‹ ê²½ìš°
							3-2-1. 4ë²ˆìœ¼ë¡œ ì´ë™
					4. ì°¸ì—¬ì ë°°ì—´ì— ìœ ì € DBê°’ì„ ì €ì¥
						4-1. ìœ ì € ê°ì²´ ì•ˆì— ìˆëŠ” ìœ„ì¹˜ ê°’ì— ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ìˆëŠ” ê²½ìš°
							4-1-1. ëœë¤ ê°’ì„ ìœ„ì¹˜ ê°’ìœ¼ë¡œ ì •í•¨ (ëœë¤ê°’ ë²”ìœ„:x:-2564.8~-3174.8, y:-5672.9~-6052.9, z: 871.2~901.2)
							4-1-2. ì°¸ì—¬ì ë°°ì—´ì— ìœ ì €ì˜ ìœ„ì¹˜ ê°’ì„ ì €ì¥
							4-1-3. ìœ ì €DB ì— ìœ ì €ì˜ ìœ„ì¹˜ê°’ì„ ì €ì¥
							4-1-4. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ uDB(ìœ ì €DB ì „ì†¡ íŒ¨í‚·)ë¡œ ìœ ì €DBë¥¼ ì „ì†¡
							4-1-5. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° DBs(ìœ ì €DB ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ì„ ë°›ìŒ
						4-2. ìœ ì € ê°ì²´ ì•ˆì— ìˆëŠ” ìœ„ì¹˜ì— ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ì—†ëŠ” ê²½ìš°
							4-2-1. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìœ ì €DBë¥¼ ì „ì†¡
							4-2-2. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° DBs(ìœ ì €DB ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ì„ ë°›ìŒ
					5. ì ‘ì† ê³¼ì •ì—ì„œ setTimeoutì„ í†µí•´ 1ë¶„ë™ì•ˆ DBs(ìœ ì €DB ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ê°€ ì˜¤ì§€ì•Šì„ ê²½ìš° ì ‘ì† ì‹¤íŒ¨ ì²˜ë¦¬
						5-1. ì ‘ì† ì‹¤íŒ¨ ì²˜ë¦¬: ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë¥¼ í•œë‹¤. [(ë¡œê·¸ì•„ì›ƒ)](https://www.notion.so/669cb6d0069c4cbe8fff877c2e96a246)
```

# ì°¸ì—¬ì ë°°ì—´

```jsx
UDP ì„œë²„

í”„ë¡œí† ì½œ:  DBs(í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ìœ ì €DB íšŒì‹  ì™„ë£Œ í”„ë¡œí† ì½œ)
					cLs(ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚´ëŠ” ì°¸ì—¬ì ë°°ì—´ ì „ì†¡ í”„ë¡œí† ì½œ)
					cLO(í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ì°¸ì—¬ì ë°°ì—´ íšŒì‹  ì™„ë£Œ í”„ë¡œí† ì½œ)
					
DBs message: nick(string)
cLs message: nick(string), Lx(float), Ly(float), Lz(float), Rz(float), cla(int),
				     lv(int), pExp(int), cLs(int), act(int)
ì²˜ë¦¬ ë‚´ìš©:
					1. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° DBs(ìœ ì €DB ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ì„ ë°›ëŠ”ë‹¤.
					2. ì°¸ì—¬ì ë°°ì—´ì„ cLs(ì°¸ì—¬ì ë°°ì—´ ì „ì†¡ íŒ¨í‚·)ìœ¼ë¡œ ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡
					3. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° cLO(ì°¸ì—¬ì ë°°ì—´ ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ì„ ë°›ìŒ
					4. ì ‘ì† ê³¼ì •ì—ì„œ setTimeoutì„ í†µí•´ 1ë¶„ë™ì•ˆ cLO(ì°¸ì—¬ì ë°°ì—´ ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ê°€ 
						 ì˜¤ì§€ì•Šì„ ê²½ìš° ì ‘ì† ì‹¤íŒ¨ ì²˜ë¦¬
						4-1. ì ‘ì† ì‹¤íŒ¨ ì²˜ë¦¬: ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë¥¼ í•œë‹¤. [(ë¡œê·¸ì•„ì›ƒ ë§í¬)](https://www.notion.so/669cb6d0069c4cbe8fff877c2e96a246)
```

# ëª¬ìŠ¤í„° ë°°ì—´

```jsx
UDP ì„œë²„

í”„ë¡œí† ì½œ: cLO(í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ì°¸ì—¬ì ë°°ì—´ íšŒì‹  ì™„ë£Œ í”„ë¡œí† ì½œ)
					mAs(ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚´ëŠ” ëª¬ìŠ¤í„° ë°°ì—´ ì „ì†¡ í”„ë¡œí† ì½œ)
					mAO(í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ëª¬ìŠ¤í„° ë°°ì—´ íšŒì‹  ì™„ë£Œ í”„ë¡œí† ì½œ)
					

cLO message: nick(string)
mAs message: mID(int), mcHP(int), cLx(float), cLy(float), cLz(float), cRz(float), mAs(int), mRT(int)
mAO message: mID(int)

ì²˜ë¦¬ ë‚´ìš©:
					1. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° cLO(ì°¸ì—¬ì ë°°ì—´ ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ì„ ë°›ëŠ”ë‹¤.
					2. ëª¬ìŠ¤í„° ë°°ì—´(mList)ì„ mAs(ëª¬ìŠ¤í„° ë°°ì—´ ì „ì†¡ íŒ¨í‚·)ë¡œ ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡
					3. ìš”ì²­ì´ ì˜¨ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° mAO(ëª¬ìŠ¤í„° ë°°ì—´ ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ì„ ë°›ìŒ
					4. ì ‘ì† ê³¼ì •ì—ì„œ setTimeoutì„ í†µí•´ 1ë¶„ë™ì•ˆ mAO(ëª¬ìŠ¤í„° ë°°ì—´ ì „ì†¡ ì„±ê³µ íŒ¨í‚·)ê°€ 
						 ì˜¤ì§€ì•Šì„ ê²½ìš° ì ‘ì† ì‹¤íŒ¨ ì²˜ë¦¬
						4-1. ì ‘ì† ì‹¤íŒ¨ ì²˜ë¦¬: ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë¥¼ í•œë‹¤. [(ë¡œê·¸ì•„ì›ƒ ë§í¬)](https://www.notion.so/669cb6d0069c4cbe8fff877c2e96a246)
```

# í”Œë ˆì´ ë„ì¤‘ ìƒˆë¡œìš´ í”Œë ˆì´ì–´ê°€ ë“¤ì–´ì™”ì„ ê²½ìš°

```jsx
í”„ë¡œí† ì½œ: NP(ìƒˆë¡œìš´ ì°¸ì—¬ì ë°°ì—´ ì—…ë°ì´íŠ¸ í”„ë¡œí† ì½œ)

NP message: nick(string), Lx(float), Ly(float), Lz(float), Rz(float), cla(int),
				    lv(int), pExp(int), cLs(int), act(int), cnt(int)

ì²˜ë¦¬ë‚´ìš©: 
1. ìƒˆë¡œìš´ í”Œë ˆì´ì–´ê°€ ë“¤ì–´ì™”ì„ ê²½ìš° 
2. ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìƒˆë¡œìš´ í”Œë ˆì´ì–´ì˜ ì°¸ì—¬ì ê°ì²´ë¥¼ ë¸Œë¡œë“œìºìŠ¤íŒ…í•œë‹¤.
```

## ê²€ì¦

input

```lua
path: 127.0.0.1:9000
message: {cmd: CS, id: asdf}
```

output (classê°€ 0ì¼ ê²½ìš°)

```jsx
massageì— ìˆëŠ” idë¥¼ DBì—ì„œ ì¡°íšŒ 
DBì— idê°€ ìˆì„ ê²½ìš° claë¥¼ ì¡°íšŒí•´ì„œ claê°€ 0ì¼ ê²½ìš°
-> cc 1ë°˜í™˜ (Response) { cmd: CC, id: asdf, cla: 0 }
```

input (classê°€ 0ì¼ ê²½ìš°)

```jsx
message: { cmd: CC, id: asdf, cla: 1}
```

output (classê°€ 1, 2, 3ì¼ ê²½ìš° - ìœ ì €DB ì „ì†¡(ìœ ì € ê°ì²´ ì•ˆì— ìˆëŠ” ìœ„ì¹˜ì— ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ì—†ëŠ” ê²½ìš°))

```jsx
massageì— ìˆëŠ” idë¥¼ DBì—ì„œ ì¡°íšŒ 
DBì— idê°€ ìˆì„ ê²½ìš°
-> uDB 1ë°˜í™˜ (Response) { cmd: uDB, cla: 1, nick:warriar, pmHP: 100, pcHP: 100, 
													Ly: 441.21,Lx: 453.2335,Lz: 929.193, 
													lv: 1, pExp:9,Rz: 50, act: 01 }
```

output (classê°€ 1, 2, 3ì¼ ê²½ìš° - ìœ ì €DB ì „ì†¡(ìœ ì € ê°ì²´ ì•ˆì— ìˆëŠ” ìœ„ì¹˜ì— ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ìˆëŠ” ê²½ìš°))

```jsx
massageì— ìˆëŠ” idë¥¼ DBì—ì„œ ì¡°íšŒ 
DBì— idê°€ ìˆì„ ê²½ìš°
ìœ ì € ê°ì²´ ì•ˆì— ìˆëŠ” ìœ„ì¹˜ì— ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ìˆëŠ” ê²½ìš° ëœë¤ê°’ì„ ì§€ì •í•´ì¤Œ
(ëœë¤ê°’ ë²”ìœ„:x:-2564.8~-3174.8, y:-5672.9~-6052.9, z: 871.2~901.2)
-> uDB 1ë°˜í™˜ (Response) { cmd: uDB, cla: 1, nick:warriar, pmHP: 100, pcHP: 100, 
													Ly: 441.21,Lx: 453.2335,Lz: 929.193, 
													lv: 1, pExp:9,Rz: 50, act: 01 }
```

input (classê°€ 1, 2, 3ì¼ ê²½ìš° - ìœ ì €DB ì „ì†¡)

```jsx
message: { cmd: DBs, nick: warriar }
```

output

```jsx
ì´ì „ ìƒíƒœ: []
ë°”ë€ ìƒíƒœ: { cmd: cLs, cla: 1, nick:warriar, pmHP: 100, pcHP: 100, 
													Ly: 441.21,Lx: 453.2335,Lz: 929.193, 
													lv: 1, pExp:9,Rz: 50, act: 01 }
```

input 

```jsx
message: { cmd: cLO, nick:warriar }
```

output

```jsx
message: { 
cmd: mAs,
{ mID: 1, mcHP: 100, cLx: -2400, cLy: -9510, cLz: -111.6, cRz: 90, mAct: 101, mRT: 10000 }
{ mID: 2, mcHP: 100, cLx: -3580, cLy: -9660, cLz: -168, cRz: 50, mAct: 101, mRT: 10000 }
{ mID: 3, mcHP: 100, cLx: -3160, cLy: -8680, cLz: -168, cRz: 140, mAct: 101, mRT: 10000 }
{ mID: 4, mcHP: 100, cLx: -1960, cLy: -8390, cLz: -168, mAct: 101, mRT: 10000 }
{ mID: 5, mcHP: 100, cLx: -890, cLy: -7140, cLz: 72, cRz: 110, mAct: 101, mRT: 10000 }
{ mID: 6, mcHP: 100, cLx: 2340, cLy: -5660, cLz: -8, cRz: 40, mAct: 101, mRT: 10000 }
{ mID: 7, mcHP: 100, cLx: 310, cLy: -5610, cLz: 42, cRz: 0, mAct: 101, mRT: 10000 }
{ mID: 8, mcHP: 100, cLx: 240, cLy: -3480, cLz: 202, cRz: 190, mAct: 101, mRT: 10000 }
{ mID: 9, mcHP: 100, cLx: 2630, cLy: -4340, cLz: -28, cRz: 100, mAct: 101, mRT: 10000 }
{ mID: 10, mcHP: 100, cLx: 1640, cLy: -1690, cLz: -98, cRz: 230, mAct: 10, mRT: 10000 }
{ mID: 11, mcHP: 100, cLx: 1870, cLy: -250, cLz: 152, cRz: 150, Act: 101, mRT: 10000 }
{ mID: 21, mcHP: 500, cLx: -7210, cLy: -7360, cLz: -98, cRz: 100, mAct: 101, mRT: 30000 }
{ mID: 22, mcHP: 500, cLx: -8070, cLy: 680, cLz:  62, cRz: 30, mAct: 101, mRT: 30000 } 
}
```

input

```jsx
message: { cmd: mAO, nick: warriar }
```

í”Œë ˆì´ ë„ì¤‘ ìƒˆë¡œìš´ í”Œë ˆì´ì–´ê°€ ë“¤ì–´ì™”ì„ ê²½ìš°

```jsx
message: { cmd: NP, nick: asdf, Lx: 453.2335, Ly: 441.21, Lz: 929.193,  Rz: 50, class: 1,
				    lv: 1, pExp: 8, act: 01 }
```