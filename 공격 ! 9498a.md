# 공격 !

상태: 시작 전
우선순위: 우선순위3
작성일시: 2022년 1월 16일 오후 9:58

### UDP

```jsx
프로토콜: att (플레이어 공격을 시전했을 때 클라이언트가 서버에게 보내는 프로토콜)
					MD (플레이어 공격 성공 프로토콜)

att message: nick(string), act(int)
MD message: nick(string), mID(int)

처리내용:
1. 요청이 온 클라이언트로 부터 att 프로토콜을 받는다.
2. att 프로토콜 broadcasting한다.([상태 링크](https://www.notion.so/b2900dc6acd74e519aab2889f6d726a6))
2. 공격에 성공했을 경우 MD 프로토콜을 받는다.
	2-1. 참가자 배열(pList)에서 nick 조회하여 nick과 일치하는 pAtt(플레이어 공격력)을 얻는다.
	2-3. 몬스터 배열(mList)를 조회하여 mID가 일치한 몬스터의 mcHP(몬스터 현재체력)값을 얻는다.
	2-4. mcHP(몬스터 현재체력) - pAtt(플레이어 공격력)을 계산
		2-4-1. 만약 0보다 크다면
			2-4-1-1. mList에 mcHP를 업데이트한다.
			2-4-1-2. 요청이 온 클라이언트에게 MD 패킷을 보내준다.
		2-4-2. 만약 0보다 작다면 
			2-4-2-1. 경험치 처리를 한다. [(경험치 처리 링크)](https://www.notion.so/87392c5c1ad044ce99f4bd1cdc2f79cc)
			2-4-2-2. 리스폰 처리를 한다. [(리스폰 처리 링크)](https://www.notion.so/87bf46d819db47bba8665018d2a349fa)
```

## 검증

input

```jsx
path: 127.0.0.1:9000
message: { cmd: att, nick: warrior, act:92 }
```

output

```jsx
{ cmd:att, nick: warrior, act:92 }
```

input

```jsx
path: 127.0.0.1:9000
message: { cmd: MD, nick: warrior, mID: 2 }
```

output

```jsx
{ cmd: MD, mcHP: 30, mID: 2 }
```